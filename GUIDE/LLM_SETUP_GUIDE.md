# LLM 기반 스코어 인식 설정 가이드

## 개요

기존 OCR 방식에서 Google Gemini AI를 사용한 LLM 기반 스코어 인식으로 변경되었습니다.

## 필요한 설정

### 1. Google Gemini API 키 발급

1. [Google AI Studio](https://aistudio.google.com/)에 접속
2. Google 계정으로 로그인
3. "Get API Key" 버튼 클릭
4. 새 API 키 생성
5. 생성된 API 키를 복사

### 2. 환경 변수 설정

`.env` 파일에 다음 내용을 추가하세요:

```env
# Google Gemini API 설정 (LLM 이미지 분석용)
GOOGLE_API_KEY=your-google-gemini-api-key
```

### 3. 패키지 설치

백엔드 디렉토리에서 다음 명령어를 실행하세요:

```bash
pip install -r requirements.txt
```

## 주요 변경사항

### 백엔드 변경사항

- `backend/llm_image_analyzer.py`: 새로운 LLM 이미지 분석 모듈
- `backend/blueprints/ocr.py`: OCR 엔드포인트를 LLM 기반으로 변경
- `backend/requirements.txt`: LLM 관련 패키지 추가

### 프론트엔드 변경사항

- UI 텍스트를 "OCR"에서 "AI 스코어 인식"으로 변경
- 기능은 동일하게 유지 (이미지 업로드 → AI 분석 → 결과 확인 → 저장)

## 사용 방법

1. 스코어 페이지에서 "AI로 스코어 인식" 버튼 클릭
2. 볼링 점수표 사진 선택
3. "AI 스코어 인식" 버튼 클릭
4. AI가 인식한 결과 확인
5. "스코어 저장" 버튼으로 데이터베이스에 저장

## AI 인식 기능

- **자동 이름 인식**: 점수표에서 플레이어 이름을 자동으로 추출
- **스코어 추출**: 3게임 점수를 정확히 인식
- **날짜 인식**: 게임 날짜를 자동으로 추출 (없으면 오늘 날짜 사용)
- **데이터 검증**: 점수 범위(0-300) 자동 검증

## 문제 해결

### API 키 오류

- `GOOGLE_API_KEY` 환경 변수가 올바르게 설정되었는지 확인
- API 키가 유효한지 확인

### 이미지 인식 오류

- 이미지가 선명하고 텍스트가 잘 보이는지 확인
- 이미지 크기가 너무 크지 않은지 확인 (자동으로 리사이즈됨)

### 패키지 설치 오류

- Python 버전이 3.8 이상인지 확인
- 가상환경이 활성화되어 있는지 확인

## 성능 최적화

- 이미지는 자동으로 최대 2048px로 리사이즈됩니다
- RGB 형식으로 자동 변환됩니다
- 안전 설정이 완화되어 이미지 분석이 원활하게 진행됩니다
